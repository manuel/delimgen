<html><head><script type="module">
/*
 * This example spawns multiple independent generators, each of which
 * repeatedly prints something and then sleeps.
 */
import { run } from "../index.mjs";
import { sleep } from "../sleep.mjs";

function* sleeper(id)
{
    while (true) {
        document.write("hello from " + id + " ");
        yield* sleep(1000);
    }
}

function* main()
{
    /*
     * Spawn five generators, sleeping a little in between.
     */
    for (let i = 1; i <= 5; i++) {
        yield* run(sleeper(i));
        yield* sleep(150);
    }
}

window.onload = () => run(main()).next();
</script></head></html>
